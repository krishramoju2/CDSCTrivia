<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coding Trivia — Quick</title>
  <style>
    :root{
      --bg1:#0f1724; /* deep navy */
      --bg2:#061126; /* darker */
      --card:#0b2540;
      --accent:#7c3aed;
      --accent-2:#06b6d4;
      --glass: rgba(255,255,255,0.05);
      --glass-2: rgba(255,255,255,0.03);
      --text:#e6eef8;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.12), transparent 10%),
                  radial-gradient(1000px 500px at 90% 90%, rgba(6,182,212,0.08), transparent 10%),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      color:var(--text);
      display:flex;align-items:center;justify-content:center;padding:32px;
    }
    .wrap{
      width:960px;max-width:96%;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border-radius:16px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.6);backdrop-filter: blur(6px);
      display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start;
    }
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:20px;box-shadow:0 6px 18px rgba(92,40,255,0.18)}
    h1{margin:0;font-size:20px}
    p.lead{margin:6px 0 0;opacity:0.9}

    /* Left: game area */
    .game{
      background:linear-gradient(180deg,var(--glass),var(--glass-2));border-radius:12px;padding:20px;min-height:420px;position:relative;
      display:flex;flex-direction:column;gap:16px;overflow:hidden;
    }
    .header-row{display:flex;align-items:center;justify-content:space-between}
    .player-chip{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:999px;display:flex;gap:10px;align-items:center}
    .player-chip strong{font-weight:700}
    .timer{font-variant-numeric:tabular-nums}

    .card{background:transparent;padding:10px;border-radius:12px}
    .question-box{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border:1px solid rgba(255,255,255,0.04);padding:18px;border-radius:12px}
    .qnum{font-size:13px;opacity:0.8}
    .qtext{font-size:18px;margin-top:6px}

    .options{display:grid;gap:10px;margin-top:12px}
    .opt{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);padding:12px;border-radius:10px;cursor:pointer;transition:all 200ms;display:flex;align-items:center;gap:12px}
    .opt:hover{transform:translateY(-4px);box-shadow:0 6px 18px rgba(0,0,0,0.35)}
    .opt.correct{border-color:rgba(34,197,94,0.6);background:linear-gradient(90deg, rgba(34,197,94,0.08), transparent)}
    .opt.wrong{border-color:rgba(239,68,68,0.6);background:linear-gradient(90deg, rgba(239,68,68,0.06), transparent)}

    .controls{display:flex;gap:10px;align-items:center}
    button.btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;color:white;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;box-shadow:0 8px 26px rgba(96,165,250,0.08)}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:8px 12px}

    /* Right: sidebar */
    .side{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:18px;border-radius:12px;min-height:420px;display:flex;flex-direction:column;gap:12px
    }
    .leaderboard{flex:1;overflow:auto;padding:8px;border-radius:10px}
    .lb-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;margin-bottom:8px}
    .small{font-size:12px;opacity:0.8}

    .start-screen{display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center;height:100%}
    input[type=text]{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--text)}
    .muted{opacity:0.75;font-size:13px}

    .hide{display:none}
    footer{font-size:12px;color:rgba(255,255,255,0.6);opacity:0.9}

    /* confetti canvas */
    #confetti{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none}

    @media (max-width:880px){
      .wrap{grid-template-columns:1fr;}
      .side{order:-1}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="game">
      <canvas id="confetti"></canvas>
      <div class="header-row">
        <div class="brand">
          <div class="logo">CT</div>
          <div>
            <h1>Coding Trivia — Quick</h1>
            <p class="lead">Fun, fast, and friendly coding trivia for college folks</p>
          </div>
        </div>
        <div class="player-chip">
          <div id="playerName">Guest</div>
          <div class="small">Score: <strong id="score">0</strong></div>
        </div>
      </div>

      <!-- START SCREEN -->
      <div id="startScreen" class="start-screen card">
        <div style="width:100%;max-width:520px">
          <label class="small muted">Enter your name to begin</label>
          <input id="nameInput" type="text" placeholder="Your name (e.g., Aisha, Raj)" maxlength="20" />
          <div class="muted">Tip: Keep it friendly — it'll show on the leaderboard.</div>
        </div>
        <div style="display:flex;gap:10px;">
          <button id="startBtn" class="btn">Start Quiz</button>
          <button id="viewLBBtn" class="ghost">View Leaderboard</button>
        </div>
        <div class="muted">10 easy multiple-choice questions • No account required • Leaderboard stored locally</div>
      </div>

      <!-- QUIZ AREA -->
      <div id="quizArea" class="hide">
        <div class="question-box">
          <div class="qnum small" id="qNum">Question 1 of 10</div>
          <div class="qtext" id="qText">Which language is primarily used for styling web pages?</div>
          <div class="options" id="options"></div>
        </div>

        <div class="controls">
          <button id="nextBtn" class="btn hide">Next</button>
          <button id="finishBtn" class="ghost hide">Finish</button>
          <div style="flex:1"></div>
          <div class="small muted">Progress: <span id="progress">0%</span></div>
        </div>
      </div>

      <!-- FINISH SCREEN -->
      <div id="finishScreen" class="card hide" style="text-align:center">
        <h2>Nice work!</h2>
        <p class="muted">Your score: <strong id="finalScore">0</strong></p>
        <div style="display:flex;gap:10px;justify-content:center;margin-top:12px">
          <button id="saveBtn" class="btn">Save to Leaderboard</button>
          <button id="playAgainBtn" class="ghost">Play Again</button>
        </div>
      </div>

    </div>

    <aside class="side">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="small muted">Leaderboard</div>
          <div style="font-weight:700;font-size:16px">Top Players</div>
        </div>
        <div class="small muted">Local • Persistent</div>
      </div>
      <div class="leaderboard" id="leaderboard">
        <!-- leaderboard items inserted here -->
      </div>
      <div style="display:flex;gap:8px">
        <button id="clearLB" class="ghost">Clear Leaderboard</button>
        <button id="exportLB" class="ghost">Export JSON</button>
      </div>
      <footer style="margin-top:8px">Made for college coding nights • Easy questions • Have fun!</footer>
    </aside>
  </div>

  <script>
    // --- Questions (easy, coding/common knowledge for college students) ---
    const QUESTIONS = [
      {q: 'Which language is primarily used for styling web pages?', a:['HTML','CSS','Python','C++'], correct:1},
      {q: 'Which of these is a JavaScript library for building user interfaces?', a:['Django','React','Laravel','Flask'], correct:1},
      {q: 'What does "HTML" stand for?', a:['HyperText Markup Language','HighText Machine Language','Hyperlinks and Text Markup','Home Tool Markup Language'], correct:0},
      {q: 'Which operator is used for assignment in most programming languages?', a:['==','=',':=','==='], correct:1},
      {q: 'Which data structure uses LIFO (Last In, First Out)?', a:['Queue','Stack','Tree','Graph'], correct:1},
      {q: 'Which command initializes a new Git repository?', a:['git start','git init','git create','git new'], correct:1},
      {q: 'Which tag is used for a clickable link in HTML?', a:['<link>','<a>','<href>','<button>'], correct:1},
      {q: 'Which of these is NOT a programming paradigm?', a:['Object-oriented','Procedural','Functional','Typographic'], correct:3},
      {q: 'Which is the correct way to declare a function in JavaScript?', a:['function foo() {}','def foo() {}','fun foo() {}','fn foo() {}'], correct:0},
      {q: 'What does CSS stand for?', a:['Computer Style Sheets','Cascading Style Sheets','Creative Style System','Control Style Sheets'], correct:1}
    ];

    // State
    let playerName = 'Guest';
    let current = 0;
    let score = 0;
    let answered = false;

    // Elements
    const startScreen = document.getElementById('startScreen');
    const quizArea = document.getElementById('quizArea');
    const finishScreen = document.getElementById('finishScreen');
    const nameInput = document.getElementById('nameInput');
    const startBtn = document.getElementById('startBtn');
    const viewLBBtn = document.getElementById('viewLBBtn');
    const playerNameEl = document.getElementById('playerName');
    const scoreEl = document.getElementById('score');
    const qNumEl = document.getElementById('qNum');
    const qTextEl = document.getElementById('qText');
    const optionsEl = document.getElementById('options');
    const nextBtn = document.getElementById('nextBtn');
    const finishBtn = document.getElementById('finishBtn');
    const progressEl = document.getElementById('progress');
    const finalScoreEl = document.getElementById('finalScore');
    const saveBtn = document.getElementById('saveBtn');
    const playAgainBtn = document.getElementById('playAgainBtn');
    const leaderboardEl = document.getElementById('leaderboard');
    const clearLB = document.getElementById('clearLB');
    const exportLB = document.getElementById('exportLB');
    const viewLeaderboardBtn = document.getElementById('viewLBBtn');

    const LB_KEY = 'codingTriviaLeaderboard_v1';

    // --- Helpers ---
    function shuffle(s){ // simple Fisher-Yates
      for(let i=s.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[s[i],s[j]]=[s[j],s[i]]}
      return s;
    }

    function startGame(){
      playerName = (nameInput.value || 'Guest').trim().slice(0,20) || 'Guest';
      playerNameEl.textContent = playerName;
      score = 0; current = 0; answered = false;
      // shuffle copy of questions for variety
      window.questions = JSON.parse(JSON.stringify(QUESTIONS));
      shuffle(window.questions);
      startScreen.classList.add('hide');
      finishScreen.classList.add('hide');
      quizArea.classList.remove('hide');
      updateScore();
      showQuestion();
    }

    function showQuestion(){
      const q = window.questions[current];
      qNumEl.textContent = `Question ${current+1} of ${window.questions.length}`;
      qTextEl.textContent = q.q;
      optionsEl.innerHTML = '';
      q.a.forEach((opt, idx)=>{
        const div=document.createElement('div');div.className='opt';div.tabIndex=0;div.dataset.idx=idx;div.textContent=opt;
        div.addEventListener('click', ()=> selectOption(div));
        div.addEventListener('keydown', (e)=>{ if(e.key==='Enter') selectOption(div) });
        optionsEl.appendChild(div);
      });
      progressEl.textContent = Math.round((current/window.questions.length)*100) + '%';
      nextBtn.classList.add('hide');
      finishBtn.classList.add('hide');
      answered=false;
      // reveal finish button if last
      if(current===window.questions.length-1){ finishBtn.classList.remove('hide') }
    }

    function selectOption(el){
      if(answered) return;
      answered=true;
      const chosen = Number(el.dataset.idx);
      const q = window.questions[current];
      // mark all
      const opts = [...optionsEl.children];
      opts.forEach(o=>o.classList.add('disabled'));
      if(chosen===q.correct){
        el.classList.add('correct'); score += 10; updateScore();
      } else {
        el.classList.add('wrong');
        // highlight correct
        opts.forEach(o=>{ if(Number(o.dataset.idx)===q.correct) o.classList.add('correct') });
      }
      if(current < window.questions.length-1){ nextBtn.classList.remove('hide') } else { finishBtn.classList.remove('hide') }
    }

    function updateScore(){ scoreEl.textContent = score }

    function nextQuestion(){
      current++;
      if(current >= window.questions.length){ finishGame(); return; }
      showQuestion();
    }

    function finishGame(){
      quizArea.classList.add('hide');
      finishScreen.classList.remove('hide');
      finalScoreEl.textContent = score;
      progressEl.textContent = '100%';
      triggerConfetti();
    }

    function saveToLeaderboard(){
      const list = JSON.parse(localStorage.getItem(LB_KEY) || '[]');
      const entry = {name:playerName, score:score, date:new Date().toISOString()};
      list.push(entry);
      // sort desc and keep top 20
      list.sort((a,b)=>b.score - a.score || new Date(a.date) - new Date(b.date));
      localStorage.setItem(LB_KEY, JSON.stringify(list.slice(0,50)));
      renderLeaderboard();
    }

    function renderLeaderboard(){
      const list = JSON.parse(localStorage.getItem(LB_KEY) || '[]');
      leaderboardEl.innerHTML='';
      if(list.length===0){ leaderboardEl.innerHTML='<div class="muted">No scores yet — be the first!</div>'; return }
      list.slice(0,12).forEach((e,i)=>{
        const el=document.createElement('div');el.className='lb-item';
        el.innerHTML = `<div style="display:flex;flex-direction:column"><strong>${i+1}. ${escapeHtml(e.name)}</strong><span class="small muted">${new Date(e.date).toLocaleString()}</span></div><div style="text-align:right"><div style="font-weight:700">${e.score}</div><div class="small muted">pts</div></div>`;
        leaderboardEl.appendChild(el);
      })
    }

    function escapeHtml(s){return s.replace(/[&<>\"']/g, (c)=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]))}

    function clearLeaderboard(){ if(confirm('Clear leaderboard? This cannot be undone.')){ localStorage.removeItem(LB_KEY); renderLeaderboard(); } }
    function exportLeaderboard(){ const list=localStorage.getItem(LB_KEY)||'[]'; const blob = new Blob([list], {type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='leaderboard.json'; a.click(); URL.revokeObjectURL(url); }

    function playAgain(){ nameInput.value = playerName; startGame(); }

    // --- Confetti (simple) ---
    function triggerConfetti(){
      const c = document.getElementById('confetti');
      const ctx = c.getContext('2d');
      const DPR = window.devicePixelRatio || 1; const W = c.width = c.clientWidth * DPR; const H = c.height = c.clientHeight * DPR; ctx.scale(DPR,DPR);
      const pieces = [];
      for(let i=0;i<80;i++){
        pieces.push({x:Math.random()*c.clientWidth,y:-20+Math.random()*20, vx:(Math.random()-0.5)*6, vy:Math.random()*4+2, r:Math.random()*6+4, color:`hsl(${Math.floor(Math.random()*360)},70%,60%)`, rotation:Math.random()*360, vr:(Math.random()-0.5)*10});
      }
      let t=0;
      function frame(){ ctx.clearRect(0,0,c.clientWidth, c.clientHeight); t+=1; pieces.forEach(p=>{ p.x += p.vx; p.y += p.vy; p.vy += 0.08; p.rotation += p.vr; ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.rotation * Math.PI/180); ctx.fillStyle=p.color; ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.6); ctx.restore(); });
        // remove if offscreen
        if(pieces.every(p=>p.y>c.clientHeight+50)) { cancelAnimationFrame(anim); setTimeout(()=>{ctx.clearRect(0,0,c.clientWidth, c.clientHeight)}, 200); return }
        var anim = requestAnimationFrame(frame);
      }
      frame();
    }

    // --- Event listeners ---
    startBtn.addEventListener('click', startGame);
    viewLBBtn.addEventListener('click', ()=>{ startScreen.classList.add('hide'); quizArea.classList.add('hide'); finishScreen.classList.add('hide'); renderLeaderboard(); document.querySelector('.side').scrollIntoView({behavior:'smooth'}) });
    nextBtn.addEventListener('click', nextQuestion);
    finishBtn.addEventListener('click', finishGame);
    saveBtn.addEventListener('click', ()=>{ saveToLeaderboard(); alert('Saved! Check the leaderboard on the right.'); });
    playAgainBtn.addEventListener('click', ()=>{ playAgain(); });
    clearLB.addEventListener('click', clearLeaderboard);
    exportLB.addEventListener('click', exportLeaderboard);
    playAgainBtn.addEventListener('keydown', (e)=>{ if(e.key==='Enter') playAgain() });

    // init
    renderLeaderboard();

    // small accessibility: press Enter in name field to start
    nameInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') startGame() });
  </script>
</body>
</html>
